---
import BaseLayout from '../layouts/BaseLayout.tsx';
import TodayILearnedPostsList from '../components/TodayILearnedPostsList.tsx';

export async function createCollection() {
  const allPosts = Astro.fetchContent('./today-i-learned/*.md')
    .sort((a, b) => a.published_at.localeCompare(b.published_at));

  console.log('allPosts:', allPosts);

  return {
    paginate: true,
    route: '/today-i-learned/:page?',
    async props({paginate}) {
      return {
        posts: paginate(allPosts, {pageSize: 10}),
      };
    },
  };
}

const {posts} = Astro.props;
---
<BaseLayout title="Today I Learned" url="/today-i-learned">
  <article class="prose">
    <TodayILearnedPostsList posts={posts.data} /> 
  </article>
</BaseLayout>
