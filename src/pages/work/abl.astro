---
import Layout from '~/layouts/Layout.astro'
import BaseLayout from '~/components/BaseLayout.astro'
import Footer from '~/components/Footer.astro'
import AppStoreLinks from '~/components/AppStoreLinks.astro'
---

<Layout title="ABL - Work">
  <BaseLayout>
    <article class="mt-12">
      <!-- Back link -->
      <a
        href="/work"
        class="inline-flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mb-6"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-4 h-4"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M15.75 19.5 8.25 12l7.5-7.5"></path>
        </svg>
        Back to Work
      </a>

      <!-- Header -->
      <header class="mb-12">
        <div class="flex flex-col sm:flex-row gap-6 items-start">
          <div
            class="flex-shrink-0 flex items-center justify-center w-24 h-24 bg-gray-50 dark:bg-zinc-800 rounded-xl border border-gray-200 dark:border-zinc-700"
          >
            <img
              src="/company/abl.svg"
              alt="ABL Logo"
              width="60"
              height="24"
              class="dark:invert"
            />
          </div>
          <div class="flex-1">
            <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">
              ABL Configuration App
            </h1>
            <p class="text-gray-600 dark:text-gray-400 mt-1">ABL GmbH</p>
            <div
              class="flex flex-wrap gap-4 mt-3 text-sm text-gray-500 dark:text-gray-400"
            >
              <span class="flex items-center gap-1">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"
                  ></path>
                </svg>
                Senior React Native Developer
              </span>
            </div>
          </div>
        </div>

        <AppStoreLinks
          appStoreUrl="https://apps.apple.com/de/app/abl-configuration/id6446492340"
          playStoreUrl="https://play.google.com/store/apps/details?id=com.abl_config_app"
        />
      </header>

      <!-- Content -->
      <div class="prose lg:prose-lg max-w-none">
        <p>
          ABL is a German manufacturer of electric vehicle charging
          infrastructure, producing wallboxes and charging stations for home and
          commercial use. The Configuration App enables installers and end users
          to set up, configure, and manage ABL charging stations via WiFi and
          Bluetooth connectivity.
        </p>

        <h2>Project Overview</h2>
        <p>
          As the primary developer, I built and maintained the ABL Configuration
          App from its early stages. The app communicates directly with ABL
          wallboxes over local WiFi networks and Bluetooth, enabling device
          setup, firmware updates, network configuration, and system management.
          Over 1,300+ commits spanning multiple years of development, including
          React Native upgrades and continuous feature additions.
        </p>

        <h2>Key Contributions</h2>

        <h3>Device Communication</h3>
        <p>
          Implemented the core communication layer for connecting to ABL
          wallboxes via WiFi Access Point mode and local network connections.
          Built robust connection handling with automatic reconnection, timeout
          management, and error recovery. The app runs a local HTTP server to
          facilitate device communication.
        </p>

        <h3>QR Code Scanning</h3>
        <p>
          Integrated camera-based QR code scanning using Vision Camera for
          device discovery and onboarding. Implemented barcode detection,
          handled device-specific camera issues on Samsung devices, and added
          support for ultrawide camera lenses. Built manual input fallback for
          cases where scanning isn't possible.
        </p>

        <h3>Firmware Updates</h3>
        <p>
          Built the firmware update system allowing users to update their
          wallbox firmware over-the-air. Implemented update progress tracking,
          error handling for stuck updates, and proper device state management
          during the update process.
        </p>

        <h3>Network Configuration</h3>
        <p>
          Developed comprehensive network setup flows including WiFi
          configuration, LTE/mobile data setup, and Ethernet (LAN) connectivity.
          Implemented WiFi password management, network switching operations,
          and proper handling of different connection scenarios (AP mode, LAN,
          extender).
        </p>

        <h3>Controller & Extender Management</h3>
        <p>
          Built the system for managing controller devices and their associated
          extenders (satellite charging points). Implemented device grouping,
          extender discovery via mDNS, and the workflow for adding extenders to
          controller groups over LAN connections.
        </p>

        <h3>Multi-language Support</h3>
        <p>
          Implemented internationalization using i18next with support for
          German, English, French, Spanish, Italian, and Dutch. Integrated with
          Lokalise for translation management, including upload and download
          scripts for keeping translations in sync.
        </p>

        <h3>State Management</h3>
        <p>
          Built the application state architecture using MobX for reactive state
          management. Implemented stores for device state, controller
          configuration, connection status, and user preferences. Added React
          Query for server state management and caching.
        </p>

        <h3>UI Components</h3>
        <p>
          Developed the component library using NativeWind (Tailwind CSS for
          React Native). Built reusable components including custom dropdown
          menus, loading overlays, modal dialogs, and form inputs with React
          Hook Form integration.
        </p>

        <h3>Error Tracking & Analytics</h3>
        <p>
          Integrated Sentry for crash reporting and error tracking with session
          replay capabilities. Added Mixpanel for analytics to track user
          behavior and connection attempts. Implemented proper error context and
          tagging for searchable error logs.
        </p>

        <h3>React Native Upgrades</h3>
        <p>
          Performed multiple React Native version upgrades throughout the
          project lifecycle (up to RN 0.75). Handled breaking changes, updated
          native dependencies, fixed Xcode 15 build issues, and maintained
          compatibility with the latest iOS and Android requirements.
        </p>
      </div>

      <div class="prose lg:prose-lg max-w-none mt-8">
        <h2>Technology Stack</h2>
      </div>

      <!-- Tech Stack Grid -->
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-6 mb-12">
        <div>
          <h4
            class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-3"
          >
            Mobile
          </h4>
          <ul class="space-y-2">
            <li class="text-gray-700 dark:text-gray-300">React Native 0.75</li>
            <li class="text-gray-700 dark:text-gray-300">TypeScript</li>
            <li class="text-gray-700 dark:text-gray-300">MobX</li>
            <li class="text-gray-700 dark:text-gray-300">React Query</li>
            <li class="text-gray-700 dark:text-gray-300">NativeWind</li>
            <li class="text-gray-700 dark:text-gray-300">React Navigation</li>
          </ul>
        </div>
        <div>
          <h4
            class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-3"
          >
            Device Integration
          </h4>
          <ul class="space-y-2">
            <li class="text-gray-700 dark:text-gray-300">Vision Camera</li>
            <li class="text-gray-700 dark:text-gray-300">Local HTTP Server</li>
            <li class="text-gray-700 dark:text-gray-300">WiFi Management</li>
            <li class="text-gray-700 dark:text-gray-300">mDNS Discovery</li>
          </ul>
        </div>
        <div>
          <h4
            class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-3"
          >
            Services
          </h4>
          <ul class="space-y-2">
            <li class="text-gray-700 dark:text-gray-300">Sentry</li>
            <li class="text-gray-700 dark:text-gray-300">Mixpanel</li>
            <li class="text-gray-700 dark:text-gray-300">i18next</li>
            <li class="text-gray-700 dark:text-gray-300">Lokalise</li>
          </ul>
        </div>
        <div>
          <h4
            class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-3"
          >
            DevOps
          </h4>
          <ul class="space-y-2">
            <li class="text-gray-700 dark:text-gray-300">Fastlane</li>
            <li class="text-gray-700 dark:text-gray-300">Lefthook</li>
            <li class="text-gray-700 dark:text-gray-300">Jest</li>
            <li class="text-gray-700 dark:text-gray-300">MSW</li>
            <li class="text-gray-700 dark:text-gray-300">ESLint</li>
          </ul>
        </div>
      </div>
    </article>

    <Footer />
  </BaseLayout>
</Layout>
